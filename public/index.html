<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LANtern - Local File Sharing & Community</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÆ</text></svg>">
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="page active">
        <div class="landing-container">
            <div class="logo">
                <span class="logo-icon">üèÆ</span>
                <h1>LANtern</h1>
            </div>
            <p class="tagline">Connect, share, and collaborate on your local network</p>
            
            <div class="join-form">
                <input type="text" id="username" placeholder="üë§ Enter your name" maxlength="30" required autocomplete="off">
                <input type="password" id="session-password" placeholder="üîê Session password" maxlength="50" required>
                <input type="password" id="host-key" placeholder="üëë Host key (admin only)" maxlength="50" class="host-key-input">
                
                <div class="role-buttons">
                    <button id="join-as-host" class="btn btn-primary">
                        <span class="btn-icon">üëë</span>
                        Host Session
                    </button>
                    <button id="join-as-client" class="btn btn-secondary">
                        <span class="btn-icon">üöÄ</span>
                        Join Session
                    </button>
                </div>
            </div>

            <div class="info-box">
                <h3>Features</h3>
                <ul>
                    <li><strong>Host:</strong> Create sessions & control who joins your community</li>
                    <li><strong>Share:</strong> Files & messages with end-to-end encryption</li>
                    <li><strong>Chat:</strong> Real-time group conversations</li>
                    <li><strong>Secure:</strong> No internet required, 25MB file limit</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Host Dashboard -->
    <div id="host-page" class="page">
        <div class="app-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="host-sidebar">
                <div class="sidebar-header">
                    <span class="logo-icon">üèÆ</span>
                    <span class="sidebar-title">LANtern</span>
                    <button class="sidebar-close" id="host-sidebar-close">‚úï</button>
                </div>
                
                <nav class="sidebar-nav">
                    <button class="nav-item active" data-section="home">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Home</span>
                    </button>
                    <button class="nav-item" data-section="community">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Community</span>
                        <span class="nav-badge" id="nav-user-count">0</span>
                    </button>
                    <button class="nav-item" data-section="chat">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Group Chat</span>
                    </button>
                    <button class="nav-item" data-section="files">
                        <span class="nav-icon">üìÅ</span>
                        <span class="nav-text">Files</span>
                    </button>
                    <button class="nav-item" data-section="messages">
                        <span class="nav-icon">‚úâÔ∏è</span>
                        <span class="nav-text">Messages</span>
                    </button>
                </nav>
                
                <div class="sidebar-footer">
                    <div class="user-profile">
                        <div class="user-avatar">üëë</div>
                        <div class="user-info">
                            <span id="host-name" class="user-name">Host</span>
                            <span class="user-role">Administrator</span>
                        </div>
                    </div>
                    <button id="host-logout" class="btn btn-logout">
                        <span>üö™</span> Leave Session
                    </button>
                </div>
            </aside>
            
            <!-- Main Content -->
            <main class="main-content">
                <!-- Top Bar -->
                <header class="topbar">
                    <button class="hamburger" id="host-hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <h1 class="page-title" id="host-page-title">Home</h1>
                    <div class="topbar-actions">
                        <span class="connection-status">üü¢ Connected</span>
                    </div>
                </header>
                
                <!-- Content Sections -->
                <div class="content-wrapper">
                    <!-- Home Section -->
                    <section class="content-section active" id="host-section-home">
                        <div class="welcome-card">
                            <div class="welcome-icon">üëã</div>
                            <h2>Welcome to LANtern</h2>
                            <p>Your secure local file sharing hub is ready. Start by sharing files or chatting with your community.</p>
                        </div>
                        
                        <div class="quick-stats">
                            <div class="stat-card">
                                <span class="stat-icon">üë•</span>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-users">0</span>
                                    <span class="stat-label">Connected Users</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">üìÅ</span>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-files">0</span>
                                    <span class="stat-label">Files Shared</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">üí¨</span>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-messages">0</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-buttons">
                                <button class="action-btn" data-goto="files">
                                    <span class="action-icon">üì§</span>
                                    <span>Share Files</span>
                                </button>
                                <button class="action-btn" data-goto="chat">
                                    <span class="action-icon">üí¨</span>
                                    <span>Open Chat</span>
                                </button>
                                <button class="action-btn" data-goto="messages">
                                    <span class="action-icon">‚úâÔ∏è</span>
                                    <span>Broadcast</span>
                                </button>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Community Section -->
                    <section class="content-section" id="host-section-community">
                        <div class="section-header">
                            <h2>Community Members</h2>
                            <span id="user-count" class="count-badge">0 members</span>
                        </div>
                        <div id="users-list" class="users-grid">
                            <div class="empty-state-card">
                                <span class="empty-icon">üë•</span>
                                <p>Waiting for guests to join...</p>
                                <p class="empty-hint">Share the session link with others</p>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Chat Section -->
                    <section class="content-section" id="host-section-chat">
                        <div class="chat-container">
                            <div class="chat-header">
                                <h2>üí¨ Community Chat</h2>
                                <span class="chat-status">Live</span>
                            </div>
                            <div id="host-chat-messages" class="chat-messages">
                                <div class="chat-welcome">
                                    <span>üéâ</span>
                                    <p>Welcome to the community chat! Start a conversation.</p>
                                </div>
                            </div>
                            <div class="chat-input-area">
                                <input type="text" id="host-chat-input" placeholder="Type a message..." maxlength="500">
                                <button id="host-chat-send" class="btn btn-primary">
                                    <span>Send</span>
                                </button>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Files Section -->
                    <section class="content-section" id="host-section-files">
                        <div class="files-layout">
                            <!-- Upload Area -->
                            <div class="upload-card">
                                <h3>üì§ Share New Files</h3>
                                <div class="upload-dropzone" id="host-dropzone">
                                    <span class="upload-icon">‚òÅÔ∏è</span>
                                    <p>Drop files here to share</p>
                                    <p class="upload-hint">or click to browse ‚Ä¢ max 25MB</p>
                                    <input type="file" id="host-file-input" multiple hidden>
                                </div>
                                
                                <div class="share-options">
                                    <label class="share-label">Share with:</label>
                                    <div class="share-toggle">
                                        <button id="share-all-btn" class="toggle-btn active">Everyone</button>
                                        <button id="share-selected-btn" class="toggle-btn">Selected</button>
                                    </div>
                                    <div id="user-select-container" class="user-select-container hidden">
                                        <div id="user-checkboxes" class="user-checkboxes"></div>
                                    </div>
                                </div>
                                
                                <button id="host-upload-btn" class="btn btn-primary btn-full" disabled>
                                    üîí Upload Encrypted
                                </button>
                            </div>
                            
                            <!-- Shared Files -->
                            <div class="files-card">
                                <div class="files-card-header">
                                    <h3>üìÅ My Shared Files</h3>
                                    <div class="files-actions">
                                        <button id="host-download-all-btn" class="btn btn-small btn-outline">üì¶ Download All</button>
                                        <span id="host-files-count" class="count-badge">0</span>
                                    </div>
                                </div>
                                <div id="host-files-list" class="files-list">
                                    <div class="empty-state-card small">
                                        <span class="empty-icon">üìÅ</span>
                                        <p>No files shared yet</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Received Files -->
                            <div class="files-card">
                                <div class="files-card-header">
                                    <h3>üì• Received from Users</h3>
                                    <div class="files-actions">
                                        <button id="host-download-client-files-btn" class="btn btn-small btn-outline">üì¶ Download All</button>
                                        <span id="client-files-count" class="count-badge">0</span>
                                    </div>
                                </div>
                                <div id="received-files-list" class="files-list">
                                    <div class="empty-state-card small">
                                        <span class="empty-icon">üì•</span>
                                        <p>No files received</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Messages Section -->
                    <section class="content-section" id="host-section-messages">
                        <div class="messages-layout">
                            <!-- Broadcast -->
                            <div class="message-card">
                                <h3>üì¢ Broadcast Message</h3>
                                <div class="text-share-area">
                                    <textarea id="host-text-input" placeholder="Type a message to broadcast to all users..." rows="4"></textarea>
                                    <div class="text-share-options">
                                        <div class="share-toggle small">
                                            <button id="text-share-all-btn" class="toggle-btn active">Everyone</button>
                                            <button id="text-share-selected-btn" class="toggle-btn">Selected</button>
                                        </div>
                                        <button id="host-send-text-btn" class="btn btn-primary">Send üîí</button>
                                    </div>
                                    <div id="text-user-select-container" class="user-select-container hidden">
                                        <div id="text-user-checkboxes" class="user-checkboxes"></div>
                                    </div>
                                </div>
                                <div id="host-shared-texts" class="shared-texts-list">
                                    <p class="empty-state">No broadcasts sent yet</p>
                                </div>
                            </div>
                            
                            <!-- Inbox -->
                            <div class="message-card">
                                <div class="message-card-header">
                                    <h3>üì® Inbox</h3>
                                    <span id="host-received-texts-count" class="count-badge">0</span>
                                </div>
                                <div id="host-received-texts" class="shared-texts-list">
                                    <div class="empty-state-card small">
                                        <span class="empty-icon">üì®</span>
                                        <p>No messages received</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
        
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="host-sidebar-overlay"></div>
    </div>

    <!-- Client Dashboard -->
    <div id="client-page" class="page">
        <div class="app-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="client-sidebar">
                <div class="sidebar-header">
                    <span class="logo-icon">üèÆ</span>
                    <span class="sidebar-title">LANtern</span>
                    <button class="sidebar-close" id="client-sidebar-close">‚úï</button>
                </div>
                
                <nav class="sidebar-nav">
                    <button class="nav-item active" data-section="home">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Home</span>
                    </button>
                    <button class="nav-item" data-section="chat">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Group Chat</span>
                    </button>
                    <button class="nav-item" data-section="files">
                        <span class="nav-icon">üìÅ</span>
                        <span class="nav-text">Files</span>
                    </button>
                    <button class="nav-item" data-section="messages">
                        <span class="nav-icon">‚úâÔ∏è</span>
                        <span class="nav-text">Messages</span>
                    </button>
                </nav>
                
                <div class="sidebar-footer">
                    <div class="user-profile">
                        <div class="user-avatar">üôÇ</div>
                        <div class="user-info">
                            <span id="client-name" class="user-name">Guest</span>
                            <span class="user-role">Member</span>
                        </div>
                    </div>
                    <button id="client-logout" class="btn btn-logout">
                        <span>üö™</span> Leave Session
                    </button>
                </div>
            </aside>
            
            <!-- Main Content -->
            <main class="main-content">
                <!-- Top Bar -->
                <header class="topbar">
                    <button class="hamburger" id="client-hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <h1 class="page-title" id="client-page-title">Home</h1>
                    <div class="topbar-actions">
                        <span class="connection-status">üü¢ Connected</span>
                    </div>
                </header>
                
                <!-- Content Sections -->
                <div class="content-wrapper">
                    <!-- Home Section -->
                    <section class="content-section active" id="client-section-home">
                        <div class="welcome-card">
                            <div class="welcome-icon">üëã</div>
                            <h2>Welcome to the Session</h2>
                            <p>You're connected! Browse available files or join the community chat.</p>
                        </div>
                        
                        <div class="quick-stats">
                            <div class="stat-card">
                                <span class="stat-icon">üìÅ</span>
                                <div class="stat-info">
                                    <span class="stat-value" id="client-stat-files">0</span>
                                    <span class="stat-label">Files Available</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">‚úâÔ∏è</span>
                                <div class="stat-info">
                                    <span class="stat-value" id="client-stat-messages">0</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-buttons">
                                <button class="action-btn" data-goto="files">
                                    <span class="action-icon">üì•</span>
                                    <span>Browse Files</span>
                                </button>
                                <button class="action-btn" data-goto="chat">
                                    <span class="action-icon">üí¨</span>
                                    <span>Join Chat</span>
                                </button>
                                <button class="action-btn" data-goto="messages">
                                    <span class="action-icon">‚úâÔ∏è</span>
                                    <span>Messages</span>
                                </button>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Chat Section -->
                    <section class="content-section" id="client-section-chat">
                        <div class="chat-container">
                            <div class="chat-header">
                                <h2>üí¨ Community Chat</h2>
                                <span class="chat-status">Live</span>
                            </div>
                            <div id="client-chat-messages" class="chat-messages">
                                <div class="chat-welcome">
                                    <span>üéâ</span>
                                    <p>Welcome to the community chat! Join the conversation.</p>
                                </div>
                            </div>
                            <div class="chat-input-area">
                                <input type="text" id="client-chat-input" placeholder="Type a message..." maxlength="500">
                                <button id="client-chat-send" class="btn btn-primary">
                                    <span>Send</span>
                                </button>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Files Section -->
                    <section class="content-section" id="client-section-files">
                        <div class="files-layout">
                            <!-- Send Files -->
                            <div class="upload-card">
                                <h3>üì§ Send Files to Host</h3>
                                <div class="upload-dropzone" id="client-dropzone">
                                    <span class="upload-icon">‚òÅÔ∏è</span>
                                    <p>Drop files here</p>
                                    <p class="upload-hint">or click to browse ‚Ä¢ max 25MB</p>
                                    <input type="file" id="client-file-input" multiple hidden>
                                </div>
                                <button id="client-upload-btn" class="btn btn-primary btn-full" disabled>
                                    üîí Send Encrypted
                                </button>
                            </div>
                            
                            <!-- Available Files -->
                            <div class="files-card full-width">
                                <div class="files-card-header">
                                    <h3>üì• Available Downloads</h3>
                                    <div class="files-actions">
                                        <button id="client-download-all-btn" class="btn btn-small btn-outline">üì¶ Download All</button>
                                        <span id="available-files-count" class="count-badge">0</span>
                                    </div>
                                </div>
                                <div id="available-files-list" class="files-list">
                                    <div class="empty-state-card small">
                                        <span class="empty-icon">üì•</span>
                                        <p>No files available yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Messages Section -->
                    <section class="content-section" id="client-section-messages">
                        <div class="messages-layout">
                            <!-- Send to Host -->
                            <div class="message-card">
                                <h3>‚úâÔ∏è Message to Host</h3>
                                <div class="text-share-area">
                                    <textarea id="client-text-input" placeholder="Send a private message to the host..." rows="4"></textarea>
                                    <button id="client-send-text-btn" class="btn btn-primary btn-full">Send to Host üîí</button>
                                </div>
                            </div>
                            
                            <!-- Received from Host -->
                            <div class="message-card">
                                <div class="message-card-header">
                                    <h3>üì® Messages from Host</h3>
                                    <span id="received-texts-count" class="count-badge">0</span>
                                </div>
                                <div id="client-received-texts" class="shared-texts-list">
                                    <div class="empty-state-card small">
                                        <span class="empty-icon">üì®</span>
                                        <p>No messages from host yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
        
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="client-sidebar-overlay"></div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Upload Progress Modal -->
    <div id="progress-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Uploading...</h3>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="progress-text">0%</p>
        </div>
    </div>

    <!-- File Preview Modal -->
    <div id="preview-modal" class="preview-modal">
        <div class="preview-modal-content">
            <button id="preview-close" class="preview-close">‚úï</button>
            <h3 id="preview-filename" class="preview-title">File Preview</h3>
            <div id="preview-container" class="preview-container">
                <!-- Preview content will be inserted here -->
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>
